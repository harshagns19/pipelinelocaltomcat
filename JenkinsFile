pipeline {
	agent any
	
	stages {
	
		stage('Build'){
			steps {
				
				echo 'stage 1'
				bat 'mvn clean package'
			}
		}
		
		stage('Deploy'){
			steps{
				
				echo 'stage 2 Deploy'
				
				echo 'copying the war file from jenkins to tomcat'
				bat 'copy "C:\\Program Files (x86)\\Jenkins\\workspace\\jenkins-pipeline-tomcat\\target\\*.war" "C:\\Program Files (x86)\\apache-tomcat-9.0.37\\webapps\\"'
									  
								
								  
			}
		}
		
		stage('Test URL'){
			steps {
				
				echo 'stage 3'
				response = sh 'curl http://localhost:8080/GLPProject-0.0.1-SNAPSHOT/'
				echo "response is "+response
			}
		}
	
	
	
	
}
}
